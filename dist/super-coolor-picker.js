!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e){const o='\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="15px" height="15px" viewBox="0 0 45.701 45.7" style="enable-background:new 0 0 45.701 45.7;" xml:space="preserve">\n    <path style="fill: #444;" d="M20.687,38.332c-2.072,2.072-5.434,2.072-7.505,0L1.554,26.704c-2.072-2.071-2.072-5.433,0-7.504\n        c2.071-2.072,5.433-2.072,7.505,0l6.928,6.927c0.523,0.522,1.372,0.522,1.896,0L36.642,7.368c2.071-2.072,5.433-2.072,7.505,0\n        c0.995,0.995,1.554,2.345,1.554,3.752c0,1.407-0.559,2.757-1.554,3.752L20.687,38.332z"/>\n',n=document.createElement("template");n.innerHTML='\n    <style>\n        @keyframes reveal{\n            from {\n                opacity: 0;\n            }\n            to {\n                opacity: 1;\n            }\n        }\n        :host * {\n            box-sizing: border-box;\n        }\n        .box {\n            width: 40px;\n            height: 40px;\n            border-radius: 5px;\n            position: relative;\n            cursor: pointer;\n            transition: background-color linear 0.2s 0s;\n        }\n        .box .popover {\n            border-radius: 5px;\n            position: absolute;\n            display: none;\n            margin: 0px 5px;\n            animation: reveal ease-in-out 0.2s 0s;\n            padding: 9px;\n        }\n        .box .popover.show {\n            display: inline-block;\n        }\n        .box .popover.dark {\n            background: #444;\n        }\n        .box .popover.dark input {\n            background: #222;\n            color: #efefef;\n        }\n        .box .popover.light {\n            background: #eee;\n        }\n        .box .popover.light input {\n            background: #ddd;\n            color: #444;\n        }\n        .box .popover input[type="text"] {\n            border-radius: 5px;\n            border: none;\n            padding: 6px 9px;\n            outline: none;\n            letter-spacing: 1px;\n            text-transform: uppercase;\n            font-size: 11px;\n        }\n        .box .popover input[type="text"]::placeholder {\n            color: #666;\n        }\n        .box .popover.lite .rgba-input { display: none; }\n        .box .popover.lite .hex-input { display: none; }\n        .box .popover.lite .swatch { display: none; }\n        .box .popover .section {\n            margin-bottom: 9px;\n        }\n        .box .popover .section:last-child {\n            margin-bottom: 0px;\n        }\n        .box .popover .section:only-child {\n            margin-bottom: 0px;\n        }\n        .box .popover .swatch {\n            display: grid;\n            grid-template-columns: repeat(5, 30px);\n            grid-column-gap: 5px;\n            grid-row-gap: 5px;\n            overflow-y: auto;\n            margin-bottom: 15px;\n        }\n        .box .popover .swatch .color {\n            width: 30px;\n            height: 30px;\n            cursor: pointer;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .box .popover .colors {\n            display: grid;\n            grid-template-columns: repeat(5, 30px);\n            grid-column-gap: 5px;\n            grid-row-gap: 5px;\n            overflow-y: auto;\n        }\n        .box .popover .colors .color {\n            width: 30px;\n            height: 30px;\n            cursor: pointer;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .box .popover .hex-input {\n            width: 100%;\n        }\n        .box .popover .hex-input input {\n            width: 100%;\n        }\n        .box .popover .rgba-input {\n            width: 100%;\n            display: flex;\n        }\n        .box .popover .rgba-input input {\n            width: 100%;\n            margin-right: 5px;\n            flex-grow: 1;\n        }\n        .box .popover .rgba-input input:last-child {\n            margin-right: 0px;\n        }\n    </style>\n    <div class="box">\n        <div class="popover dark">\n            <div class="section swatch"></div>\n            <div class="section colors"></div>\n            <div class="section hex-input">\n                <input type="text" name="color" placeholder="HEX">\n            </div>\n            <div class="section rgba-input">\n                <input type="text" name="r" placeholder="R">\n                <input type="text" name="g" placeholder="G">\n                <input type="text" name="b" placeholder="B">\n                <input type="text" name="a" placeholder="A">\n            </div>\n        </div>\n    </div>\n';class r extends HTMLElement{constructor(){super(),this.setupFormAssociation(),this.colors=this.parseColorsArrayFromAttribute()||this.generatePrimaryColors(),this.attachShadow({mode:"open"}).appendChild(n.content.cloneNode(!0)),this.colorBox=this.shadowRoot.querySelector(".box"),this.popover=this.colorBox.querySelector(".popover"),this.colorsContainer=this.popover.querySelector(".colors"),this.swatch=this.popover.querySelector(".swatch"),this.colorInput=this.popover.querySelector(".hex-input input"),this.rgbaInputContainer=this.popover.querySelector(".rgba-input")}connectedCallback(){this.setSize(),this.attachColors(),this.setDefaultColor(),this.addEventListeners()}disconnectedCallback(){this.removeEventListeners()}addEventListeners(){this.popover.onclick=t=>t.stopPropagation(),this.colorBox.onclick=t=>{this.calculatePosition(t.clientX,t.clientY),this.togglePopover()},this.colorInput.onclick=t=>t.stopPropagation(),this.colorInput.onkeyup=t=>{if("Enter"==t.key){const t=this.colorInput.value;if(!this.validateHEX(t))throw new Error(`'${t}' is not a HEX color.`);this.setAttribute("value",t),this.isNewColor(t)&&(this.colors.push(t),this.attachColor(t)),this.checkColor(t)}},Array.from(this.rgbaInputContainer.querySelectorAll("input")).forEach(t=>{t.onclick=t=>t.stopPropagation(),t.onkeyup=t=>{if("Enter"==t.key){const t=parseInt(this.rgbaInputContainer.querySelector('input[name="r"]').value),e=parseInt(this.rgbaInputContainer.querySelector('input[name="g"]').value),o=parseInt(this.rgbaInputContainer.querySelector('input[name="b"]').value),n=parseInt(this.rgbaInputContainer.querySelector('input[name="a"]').value);if(!(t>=0&&t<=255&&e>=0&&e<=255&&o>=0&&o<=255&&n>=0&&n<=255))throw new Error(`'rgba(${t}, ${e}, ${o}, ${n})' is not a valid RGBA color.`);const r=this.RGBAToHEX(t,e,o,n);this.setAttribute("value",r)}}})}parseColorsArrayFromAttribute(){if(!this.hasAttribute("colors")||0==this.getAttribute("colors").length)return;return this.getAttribute("colors").split(";")}generatePrimaryColors(){let t=[],e=0;for(;e++<10;){let e=this.getRandomInt(0,255),o=this.getRandomInt(0,255),n=this.getRandomInt(0,255);t.push(this.RGBAToHEX(e,o,n,255))}return t}getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}validateHEX(t){return new RegExp(/^#[0-9A-F]{6,8}$/i).test(t)}validateRGBA(t){return new RegExp(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(1|0\.\d+))?\)$/).test(t)}isNewColor(t){return!this.colors.find(e=>e==t)}isActiveColor(t){return this.getAttribute("value")==t}removeEventListeners(){this.removeEventListener("click"),this.colorInput.removeEventListener("click"),this.colorInput.removeEventListener("keyup")}static get observedAttributes(){return["value","lite","theme"]}attributeChangedCallback(t,e,o){switch(t){case"value":this.updateColor(e,o),this.updateFormValue(o),this.checkValueValidity(o);break;case"lite":this.toggleLightMode(o);break;case"theme":this.switchTheme(e,o)}}switchTheme(t,e){this.popover.classList.remove(t),this.popover.classList.add(e)}toggleLightMode(t){this.popover.classList.toggle("lite","true"==t)}updateColor(t,e){null!=t&&(this.isNewColor(e)&&(this.colors.push(e),this.attachColor(e)),this.checkColor(e),this.colorBox.style.backgroundColor=e,this.setHEXValue(e),this.setRGBAColor(e),this.updateSwatch(e),t!=e&&t&&this.uncheckColor(t))}async updateSwatch(t){const e=parseInt(this.getAttribute("shades"))||2,o=this.calculateShades(t,e);this.attachSwatchColors(o)}attachSwatchColors(t){this.swatch.innerHTML="";for(let e of t){const t=document.createElement("div");t.classList.add("color"),t.dataset.name=e,t.style.backgroundColor=e,t.onclick=t=>{t.stopPropagation(),t.altKey?this.createMix(this.getAttribute("value"),e):this.setAttribute("value",e)},this.swatch.append(t),this.isActiveColor(e)&&this.checkSwatchColor(e)}}checkSwatchColor(t){this.swatch.querySelector(`.color[data-name="${t}"]`).innerHTML=o}uncheckSwatchColor(t){this.swatch.querySelector(`.color[data-name="${t}"]`).innerHTML=""}calculateShades(t,e){const{r:o,g:n,b:r}=this.HEXToRGBA(t);return e+=1,[...this.calculateDarkShades(o,n,r,e),...this.calculateLightShades(o,n,r,e)]}calculateDarkShades(t,e,o,n){const r=[];let i,s,a;for(let l=n-1;l>=0;l--)i=Math.floor(t-t/n*l),s=Math.floor(e-e/n*l),a=Math.floor(o-o/n*l),r.push(this.RGBAToHEX(i,s,a,255));return r}calculateLightShades(t,e,o,n){const r=255-t,i=255-e,s=255-o,a=[];let l,c,h;for(let p=1;p<n;p++)l=Math.floor(t+r/n*p),c=Math.floor(e+i/n*p),h=Math.floor(o+s/n*p),a.push(this.RGBAToHEX(l,c,h,255));return a}setHEXValue(t){this.colorInput.setAttribute("value",t)}setRGBAColor(t){const{r:e,g:o,b:n,a:r}=this.HEXToRGBA(t);this.rgbaInputContainer.querySelector('input[name="r"]').value=e,this.rgbaInputContainer.querySelector('input[name="g"]').value=o,this.rgbaInputContainer.querySelector('input[name="b"]').value=n,this.rgbaInputContainer.querySelector('input[name="a"]').value=r}HEXToRGBA(t){const e=t.replace("#","");return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:parseInt(e.substring(6,8),16)||255}}RGBAToHEX(t,e,o,n){return t=t.toString(16),e=e.toString(16),o=o.toString(16),n=n.toString(16),1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==o.length&&(o="0"+o),1==n.length&&(n="0"+n),"#"+t+e+o+n}calculatePosition(t,e){const o=window.innerWidth,n=window.innerHeight,r=e;let i="";o-t>=220?(this.popover.style.left="100%",i+="left"):(this.popover.style.right="100%",i+="right"),n-r>=220?(this.popover.style.top="0px",i+=" top"):(this.popover.style.bottom="0px",i+=" bottom"),this.popover.style.transformOrigin=i}togglePopover(){this.popover.classList.toggle("show")}setDefaultColor(){let t=this.colors[0];this.hasAttribute("value")&&this.getAttribute("value").length>0&&(t=this.getAttribute("value")),this.setAttribute("value",t)}checkColor(t){this.colorsContainer.querySelector(`.color[data-name="${t}"]`).innerHTML=o}uncheckColor(t){this.colorsContainer.querySelector(`.color[data-name="${t}"]`).innerHTML=""}attachColors(){for(let t of this.colors)this.attachColor(t)}attachColor(t){const e=document.createElement("div");e.classList.add("color"),e.dataset.name=t,e.style.backgroundColor=t,e.onclick=e=>{e.stopPropagation(),e.altKey?this.createMix(this.getAttribute("value"),t):this.setAttribute("value",t)},this.colorsContainer.appendChild(e)}createMix(t,e){const o=this.HEXToRGBA(t),n=this.HEXToRGBA(e);let r=Math.floor((o.r+n.r)/2),i=Math.floor((o.g+n.g)/2),s=Math.floor((o.b+n.b)/2),a=Math.floor((o.a+n.a)/2);const l=this.RGBAToHEX(r,i,s,a);this.setAttribute("value",l)}setSize(){this.hasAttribute("width")&&(this.colorBox.style.width=this.getAttribute("width")),this.hasAttribute("height")&&(this.colorBox.style.height=this.getAttribute("height"))}setupFormAssociation(){this._internals=this.attachInternals()}static get formAssociated(){return!0}get form(){return this._internals.form}get value(){return this.getAttribute("value")}get name(){return this.getAttribute("name")}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}updateFormValue(t){this._internals.setFormValue(t)}checkValueValidity(t){if(!this.validateHEX(t))throw this._internals.setValidity({customError:!0},`'${t}' is not a HEX format color`),new Error(`'${t}' is not a valid HEX color`);this._internals.setValidity({})}}window.customElements.define("color-picker",r)}]);